/**
* Storyboard - v0.1.0 - 11/9/2015
* http://github.com/madebykind/storyboard
* Copyright (c) 2015 Alex Graul, Irene Ros, Rich Harris;
* Dual Licensed: MIT, GPL
* https://github.com/madebykind/storyboard/blob/master/LICENSE-MIT 
* https://github.com/madebykind/storyboard/blob/master/LICENSE-GPL 
*/(function(){function a(a,b,d){if(b!==b)return c(a,d);for(var e=d-1,f=a.length;++e<f;)if(a[e]===b)return e;return-1}function b(a){return null==a?"":a+""}function c(a,b,c){for(var d=a.length,e=b+(c?0:-1);c?e--:++e<d;){var f=a[e];if(f!==f)return e}return-1}function d(a){return!!a&&"object"==typeof a}function e(a,b){for(var c=-1,d=a.length,e=-1,f=[];++c<d;)a[c]===b&&(a[c]=na,f[++e]=c);return f}function f(){}function g(){}function h(a){this.__wrapped__=a,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=_a,this.__views__=[]}function i(a,b){var c=-1,d=a.length;for(b||(b=Array(d));++c<d;)b[c]=a[c];return b}function j(a,b){for(var c=-1,d=a.length;++c<d&&b(a[c],c,a)!==!1;);return a}function k(a,b,c){for(var d=-1,e=ub(b),f=e.length;++d<f;){var g=e[d],h=a[g],i=c(h,b[g],g,a,b);(i===i?i===h:h!==h)&&(h!==Z||g in a)||(a[g]=i)}return a}function l(a,b){return null==b?a:m(b,ub(b),a)}function m(a,b,c){c||(c={});for(var d=-1,e=b.length;++d<e;){var f=b[d];c[f]=a[f]}return c}function n(a,b){return kb(a,b,ub)}function o(a){return function(b){return null==b?Z:N(b)[a]}}function p(a,b,c){var d=0,e=a?a.length:d;if("number"==typeof b&&b===b&&cb>=e){for(;e>d;){var f=d+e>>>1,g=a[f];(c?b>=g:b>g)&&null!==g?d=f+1:e=f}return e}return q(a,b,W,c)}function q(a,b,c,d){b=c(b);for(var e=0,f=a?a.length:0,g=b!==b,h=null===b,i=b===Z;f>e;){var j=Va((e+f)/2),k=c(a[j]),l=k!==Z,m=k===k;if(g)var n=m||d;else n=h?m&&l&&(d||null!=k):i?m&&(d||l):null==k?!1:d?b>=k:b>k;n?e=j+1:f=j}return Za(f,bb)}function r(a,b,c){if("function"!=typeof a)return W;if(b===Z)return a;switch(c){case 1:return function(c){return a.call(b,c)};case 3:return function(c,d,e){return a.call(b,c,d,e)};case 4:return function(c,d,e,f){return a.call(b,c,d,e,f)};case 5:return function(c,d,e,f,g){return a.call(b,c,d,e,f,g)}}return function(){return a.apply(b,arguments)}}function s(a,b,c){for(var d=c.length,e=-1,f=Ya(a.length-d,0),g=-1,h=b.length,i=Array(h+f);++g<h;)i[g]=b[g];for(;++e<d;)i[c[e]]=a[e];for(;f--;)i[g++]=a[e++];return i}function t(a,b,c){for(var d=-1,e=c.length,f=-1,g=Ya(a.length-e,0),h=-1,i=b.length,j=Array(g+i);++f<g;)j[f]=a[f];for(var k=f;++h<i;)j[k+h]=b[h];for(;++d<e;)j[k+c[d]]=a[f++];return j}function u(a){return P(function(b,c){var d=-1,e=null==b?0:c.length,f=e>2?c[e-2]:Z,g=e>2?c[2]:Z,h=e>1?c[e-1]:Z;for("function"==typeof f?(f=r(f,h,5),e-=2):(f="function"==typeof h?h:Z,e-=f?1:0),g&&H(c[0],c[1],g)&&(f=3>e?Z:f,e=1);++d<e;){var i=c[d];i&&a(b,i,f)}return b})}function v(a,b){return function(c,d){var e=c?nb(c):0;if(!J(e))return a(c,d);for(var f=b?e:-1,g=N(c);(b?f--:++f<e)&&d(g[f],f,g)!==!1;);return c}}function w(a){return function(b,c,d){for(var e=N(b),f=d(b),g=f.length,h=a?g:-1;a?h--:++h<g;){var i=f[h];if(c(e[i],i,e)===!1)break}return b}}function x(a,b){function c(){var e=this&&this!==Ha&&this instanceof c?d:a;return e.apply(b,arguments)}var d=y(a);return c}function y(a){return function(){var b=arguments;switch(b.length){case 0:return new a;case 1:return new a(b[0]);case 2:return new a(b[0],b[1]);case 3:return new a(b[0],b[1],b[2]);case 4:return new a(b[0],b[1],b[2],b[3]);case 5:return new a(b[0],b[1],b[2],b[3],b[4]);case 6:return new a(b[0],b[1],b[2],b[3],b[4],b[5]);case 7:return new a(b[0],b[1],b[2],b[3],b[4],b[5],b[6])}var c=ib(a.prototype),d=a.apply(c,b);return S(d)?d:c}}function z(a,b){return function(c,d,e){return"function"==typeof d&&e===Z&&sb(c)?a(c,d):b(c,r(d,e,3))}}function A(a,b,c,d,f,g,h,j,k,l){function m(){for(var w=arguments.length,x=w,z=Array(w);x--;)z[x]=arguments[x];if(d&&(z=s(z,d,f)),g&&(z=t(z,g,h)),q||u){var B=m.placeholder,C=e(z,B);if(w-=C.length,l>w){var D=j?i(j):Z,E=Ya(l-w,0),F=q?C:Z,G=q?Z:C,H=q?z:Z,J=q?Z:z;b|=q?ga:ha,b&=~(q?ha:ga),r||(b&=~(ba|ca));var K=[a,b,c,H,F,J,G,D,k,E],M=A.apply(Z,K);return I(a)&&ob(M,K),M.placeholder=B,M}}var N=o?c:this,O=p?N[a]:a;return j&&(z=L(z,j)),n&&k<z.length&&(z.length=k),this&&this!==Ha&&this instanceof m&&(O=v||y(a)),O.apply(N,z)}var n=b&ia,o=b&ba,p=b&ca,q=b&ea,r=b&da,u=b&fa,v=p?Z:y(a);return m}function B(a,b,c,d){function e(){for(var b=-1,h=arguments.length,i=-1,j=d.length,k=Array(j+h);++i<j;)k[i]=d[i];for(;h--;)k[i++]=arguments[++b];var l=this&&this!==Ha&&this instanceof e?g:a;return l.apply(f?c:this,k)}var f=b&ba,g=y(a);return e}function C(a,b,c,d,e,f,g,h){var i=b&ca;if(!i&&"function"!=typeof a)throw new TypeError(ma);var j=d?d.length:0;if(j||(b&=~(ga|ha),d=e=Z),j-=e?e.length:0,b&ha){var k=d,l=e;d=e=Z}var m=i?Z:mb(a),n=[a,b,c,d,e,k,l,f,g,h];if(m&&(K(n,m),b=n[1],h=n[9]),n[9]=null==h?i?0:a.length:Ya(h-j,0)||0,b==ba)var o=x(n[0],n[2]);else o=b!=ga&&b!=(ba|ga)||n[4].length?A.apply(Z,n):B.apply(Z,n);var p=m?lb:ob;return p(o,n)}function D(a){for(var b=a.name+"",c=fb[b],d=c?c.length:0;d--;){var e=c[d],f=e.func;if(null==f||f==a)return e.name}return b}function E(a,b){var c=null==a?Z:a[b];return T(c)?c:Z}function F(a){return null!=a&&J(nb(a))}function G(a,b){return a="number"==typeof a||ya.test(a)?+a:-1,b=null==b?db:b,a>-1&&a%1==0&&b>a}function H(a,b,c){if(!S(c))return!1;var d=typeof b;if("number"==d?F(c)&&G(b,c.length):"string"==d&&b in c){var e=c[b];return a===a?a===e:e!==e}return!1}function I(a){var b=D(a),c=f[b];if("function"!=typeof c||!(b in h.prototype))return!1;if(a===c)return!0;var d=mb(c);return!!d&&a===d[0]}function J(a){return"number"==typeof a&&a>-1&&a%1==0&&db>=a}function K(a,b){var c=a[1],d=b[1],f=c|d,g=ia>f,h=d==ia&&c==ea||d==ia&&c==ja&&a[7].length<=b[8]||d==(ia|ja)&&c==ea;if(!g&&!h)return a;d&ba&&(a[2]=b[2],f|=c&ba?0:da);var j=b[3];if(j){var k=a[3];a[3]=k?s(k,j,b[4]):i(j),a[4]=k?e(a[3],na):i(b[4])}return j=b[5],j&&(k=a[5],a[5]=k?t(k,j,b[6]):i(j),a[6]=k?e(a[5],na):i(b[6])),j=b[7],j&&(a[7]=i(j)),d&ia&&(a[8]=null==a[8]?b[8]:Za(a[8],b[8])),null==a[9]&&(a[9]=b[9]),a[0]=b[0],a[1]=f,a}function L(a,b){for(var c=a.length,d=Za(b.length,c),e=i(a);d--;){var f=b[d];a[d]=G(f,c)?e[f]:Z}return a}function M(a){for(var b=V(a),c=b.length,d=c&&a.length,e=!!d&&J(d)&&(sb(a)||Q(a)||U(a)),f=-1,g=[];++f<c;){var h=b[f];(e&&G(h,d)||Oa.call(a,h))&&g.push(h)}return g}function N(a){if(f.support.unindexedChars&&U(a)){for(var b=-1,c=a.length,d=Object(a);++b<c;)d[b]=a.charAt(b);return d}return S(a)?a:Object(a)}function O(b,c,d){var e=b?b.length:0;if(!e)return-1;if("number"==typeof d)d=0>d?Ya(e+d,0):d;else if(d){var f=p(b,c);return e>f&&(c===c?c===b[f]:b[f]!==b[f])?f:-1}return a(b,c,d||0)}function P(a,b){if("function"!=typeof a)throw new TypeError(ma);return b=Ya(b===Z?a.length-1:+b||0,0),function(){for(var c=arguments,d=-1,e=Ya(c.length-b,0),f=Array(e);++d<e;)f[d]=c[b+d];switch(b){case 0:return a.call(this,f);case 1:return a.call(this,c[0],f);case 2:return a.call(this,c[0],c[1],f)}var g=Array(b+1);for(d=-1;++d<b;)g[d]=c[d];return g[b]=f,a.apply(this,g)}}function Q(a){return d(a)&&F(a)&&Oa.call(a,"callee")&&!Sa.call(a,"callee")}function R(a){return S(a)&&Qa.call(a)==sa}function S(a){var b=typeof a;return!!a&&("object"==b||"function"==b)}function T(a){return null==a?!1:R(a)?Ra.test(Na.call(a)):d(a)&&(Ia(a)?Ra:xa).test(a)}function U(a){return"string"==typeof a||d(a)&&Qa.call(a)==wa}function V(a){if(null==a)return[];S(a)||(a=Object(a));var b=a.length,c=f.support;b=b&&J(b)&&(sb(a)||Q(a)||U(a))&&b||0;for(var d=a.constructor,e=-1,g=R(d)&&d.prototype||La,h=g===a,i=Array(b),j=b>0,k=c.enumErrorProps&&(a===Ka||a instanceof Error),l=c.enumPrototypes&&R(a);++e<b;)i[e]=e+"";for(var m in a)l&&"prototype"==m||k&&("message"==m||"name"==m)||j&&G(m,b)||"constructor"==m&&(h||!Oa.call(a,m))||i.push(m);if(c.nonEnumShadows&&a!==La){var n=a===Ma?wa:a===Ka?ra:Qa.call(a),o=gb[n]||gb[ua];for(n==ua&&(g=La),b=za.length;b--;){m=za[b];var p=o[m];h&&p||(p?!Oa.call(a,m):a[m]===g[m])||i.push(m)}}return i}function W(a){return a}function X(){}function Y(a){var c=++Pa;return b(a)+c}var Z,aa="3.10.1",ba=1,ca=2,da=4,ea=8,fa=16,ga=32,ha=64,ia=128,ja=256,ka=150,la=16,ma="Expected a function",na="__lodash_placeholder__",oa="[object Array]",pa="[object Boolean]",qa="[object Date]",ra="[object Error]",sa="[object Function]",ta="[object Number]",ua="[object Object]",va="[object RegExp]",wa="[object String]",xa=/^\[object .+?Constructor\]$/,ya=/^\d+$/,za=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],Aa={"function":!0,object:!0},Ba=Aa[typeof exports]&&exports&&!exports.nodeType&&exports,Ca=Aa[typeof module]&&module&&!module.nodeType&&module,Da=Ba&&Ca&&"object"==typeof global&&global&&global.Object&&global,Ea=Aa[typeof self]&&self&&self.Object&&self,Fa=Aa[typeof window]&&window&&window.Object&&window,Ga=Ca&&Ca.exports===Ba&&Ba,Ha=Da||Fa!==(this&&this.window)&&Fa||Ea||this,Ia=function(){try{Object({toString:0}+"")}catch(a){return function(){return!1}}return function(a){return"function"!=typeof a.toString&&"string"==typeof(a+"")}}(),Ja=Array.prototype,Ka=Error.prototype,La=Object.prototype,Ma=String.prototype,Na=Function.prototype.toString,Oa=La.hasOwnProperty,Pa=0,Qa=La.toString,Ra=RegExp("^"+Na.call(Oa).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Sa=La.propertyIsEnumerable,Ta=Ja.splice,Ua=E(Ha,"WeakMap"),Va=Math.floor,Wa=E(Array,"isArray"),Xa=E(Object,"keys"),Ya=Math.max,Za=Math.min,$a=E(Date,"now"),_a=Number.POSITIVE_INFINITY,ab=4294967295,bb=ab-1,cb=ab>>>1,db=9007199254740991,eb=Ua&&new Ua,fb={},gb={};gb[oa]=gb[qa]=gb[ta]={constructor:!0,toLocaleString:!0,toString:!0,valueOf:!0},gb[pa]=gb[wa]={constructor:!0,toString:!0,valueOf:!0},gb[ra]=gb[sa]=gb[va]={constructor:!0,toString:!0},gb[ua]={constructor:!0},j(za,function(a){for(var b in gb)if(Oa.call(gb,b)){var c=gb[b];c[a]=Oa.call(c,a)}});var hb=f.support={};!function(a){var b=function(){this.x=a},c={0:a,length:a},d=[];b.prototype={valueOf:a,y:a};for(var e in new b)d.push(e);hb.enumErrorProps=Sa.call(Ka,"message")||Sa.call(Ka,"name"),hb.enumPrototypes=Sa.call(b,"prototype"),hb.nonEnumShadows=!/valueOf/.test(d),hb.spliceObjects=(Ta.call(c,0,1),!c[0]),hb.unindexedChars="x"[0]+Object("x")[0]!="xx"}(1,0);var ib=function(){function a(){}return function(b){if(S(b)){a.prototype=b;var c=new a;a.prototype=Z}return c||{}}}(),jb=v(n),kb=w(),lb=eb?function(a,b){return eb.set(a,b),a}:W,mb=eb?function(a){return eb.get(a)}:X,nb=o("length"),ob=function(){var a=0,b=0;return function(c,d){var e=qb(),f=la-(e-b);if(b=e,f>0){if(++a>=ka)return c}else a=0;return lb(c,d)}}(),pb=z(j,jb),qb=$a||function(){return(new Date).getTime()},rb=P(function(a,b,c){var d=ba;if(c.length){var f=e(c,rb.placeholder);d|=ga}return C(a,d,b,c,f)}),sb=Wa||function(a){return d(a)&&J(a.length)&&Qa.call(a)==oa},tb=u(function(a,b,c){return c?k(a,b,c):l(a,b)}),ub=Xa?function(a){var b=null==a?Z:a.constructor;return"function"==typeof b&&b.prototype===a||("function"==typeof a?f.support.enumPrototypes:F(a))?M(a):S(a)?Xa(a):[]}:M;h.prototype=ib(g.prototype),h.prototype.constructor=h,f.assign=tb,f.bind=rb,f.forEach=pb,f.keys=ub,f.keysIn=V,f.restParam=P,f.each=pb,f.extend=tb,f.identity=W,f.indexOf=O,f.isArguments=Q,f.isArray=sb,f.isFunction=R,f.isNative=T,f.isObject=S,f.isString=U,f.noop=X,f.now=qb,f.uniqueId=Y,f.VERSION=aa,rb.placeholder=f,"function"==typeof define&&"object"==typeof define.amd&&define.amd?(Ha._=f,define(function(){return f})):Ba&&Ca?Ga?(Ca.exports=f)._=f:Ba._=f:Ha._=f}).call(this),function(){"use strict";function a(a){return"function"==typeof a||"object"==typeof a&&null!==a}function b(a){return"function"==typeof a}function c(a){return"object"==typeof a&&null!==a}function d(){}function e(a,b){for(var c=0,d=a.length;d>c;c++)if(a[c]===b)return c;return-1}function f(a){var b=a._promiseCallbacks;return b||(b=a._promiseCallbacks={}),b}function g(a,b){return"onerror"===a?void xa.on("error",b):2!==arguments.length?xa[a]:void(xa[a]=b)}function h(){setTimeout(function(){for(var a,b=0;b<ya.length;b++){a=ya[b];var c=a.payload;c.guid=c.key+c.id,c.childGuid=c.key+c.childId,c.error&&(c.stack=c.error.stack),xa.trigger(a.name,a.payload)}ya.length=0},50)}function i(a,b,c){1===ya.push({name:a,payload:{key:b._guidKey,id:b._id,eventName:a,detail:b._result,childId:c&&c._id,label:b._label,timeStamp:ua(),error:xa["instrument-with-stack"]?new Error(b._label):null}})&&h()}function j(){return new TypeError("A promises callback cannot return that same promise.")}function k(){}function l(a){try{return a.then}catch(b){return Da.error=b,Da}}function m(a,b,c,d){try{a.call(b,c,d)}catch(e){return e}}function n(a,b,c){xa.async(function(a){var d=!1,e=m(c,b,function(c){d||(d=!0,b!==c?q(a,c):s(a,c))},function(b){d||(d=!0,t(a,b))},"Settle: "+(a._label||" unknown promise"));!d&&e&&(d=!0,t(a,e))},a)}function o(a,b){b._state===Ba?s(a,b._result):b._state===Ca?(b._onError=null,t(a,b._result)):u(b,void 0,function(c){b!==c?q(a,c):s(a,c)},function(b){t(a,b)})}function p(a,c){if(c.constructor===a.constructor)o(a,c);else{var d=l(c);d===Da?t(a,Da.error):void 0===d?s(a,c):b(d)?n(a,c,d):s(a,c)}}function q(b,c){b===c?s(b,c):a(c)?p(b,c):s(b,c)}function r(a){a._onError&&a._onError(a._result),v(a)}function s(a,b){a._state===Aa&&(a._result=b,a._state=Ba,0===a._subscribers.length?xa.instrument&&za("fulfilled",a):xa.async(v,a))}function t(a,b){a._state===Aa&&(a._state=Ca,a._result=b,xa.async(r,a))}function u(a,b,c,d){var e=a._subscribers,f=e.length;a._onError=null,e[f]=b,e[f+Ba]=c,e[f+Ca]=d,0===f&&a._state&&xa.async(v,a)}function v(a){var b=a._subscribers,c=a._state;if(xa.instrument&&za(c===Ba?"fulfilled":"rejected",a),0!==b.length){for(var d,e,f=a._result,g=0;g<b.length;g+=3)d=b[g],e=b[g+c],d?y(c,d,e,f):e(f);a._subscribers.length=0}}function w(){this.error=null}function x(a,b){try{return a(b)}catch(c){return Ea.error=c,Ea}}function y(a,c,d,e){var f,g,h,i,k=b(d);if(k){if(f=x(d,e),f===Ea?(i=!0,g=f.error,f=null):h=!0,c===f)return void t(c,j())}else f=e,h=!0;c._state!==Aa||(k&&h?q(c,f):i?t(c,g):a===Ba?s(c,f):a===Ca&&t(c,f))}function z(a,b){var c=!1;try{b(function(b){c||(c=!0,q(a,b))},function(b){c||(c=!0,t(a,b))})}catch(d){t(a,d)}}function A(a,b,c){return a===Ba?{state:"fulfilled",value:c}:{state:"rejected",reason:c}}function B(a,b,c,d){var e=this;e._instanceConstructor=a,e.promise=new a(k,d),e._abortOnReject=c,e._validateInput(b)?(e._input=b,e.length=b.length,e._remaining=b.length,e._init(),0===e.length?s(e.promise,e._result):(e.length=e.length||0,e._enumerate(),0===e._remaining&&s(e.promise,e._result))):t(e.promise,e._validationError())}function C(a,b){return new Fa(this,a,!0,b).promise}function D(a,b){function c(a){q(f,a)}function d(a){t(f,a)}var e=this,f=new e(k,b);if(!ta(a))return t(f,new TypeError("You must pass an array to race.")),f;for(var g=a.length,h=0;f._state===Aa&&g>h;h++)u(e.resolve(a[h]),void 0,c,d);return f}function E(a,b){var c=this;if(a&&"object"==typeof a&&a.constructor===c)return a;var d=new c(k,b);return q(d,a),d}function F(a,b){var c=this,d=new c(k,b);return t(d,a),d}function G(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}function H(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}function I(a,c){var d=this;d._id=La++,d._label=c,d._state=void 0,d._result=void 0,d._subscribers=[],xa.instrument&&za("created",d),k!==a&&(b(a)||G(),d instanceof I||H(),z(d,a))}function J(a,b,c){this._superConstructor(a,b,!1,c)}function K(a,b){return new J(Ma,a,b).promise}function L(a,b){return Ma.all(a,b)}function M(a,b){Ya[Ra]=a,Ya[Ra+1]=b,Ra+=2,2===Ra&&Oa()}function N(){var a=process.nextTick,b=process.versions.node.match(/^(?:(\d+)\.)?(?:(\d+)\.)?(\*|\d+)$/);return Array.isArray(b)&&"0"===b[1]&&"10"===b[2]&&(a=setImmediate),function(){a(S)}}function O(){return function(){Na(S)}}function P(){var a=0,b=new Va(S),c=document.createTextNode("");return b.observe(c,{characterData:!0}),function(){c.data=a=++a%2}}function Q(){var a=new MessageChannel;return a.port1.onmessage=S,function(){a.port2.postMessage(0)}}function R(){return function(){setTimeout(S,1)}}function S(){for(var a=0;Ra>a;a+=2){var b=Ya[a],c=Ya[a+1];b(c),Ya[a]=void 0,Ya[a+1]=void 0}Ra=0}function T(){try{var a=require,b=a("vertx");return Na=b.runOnLoop||b.runOnContext,O()}catch(c){return R()}}function U(a){var b={};return b.promise=new Ma(function(a,c){b.resolve=a,b.reject=c},a),b}function V(a,c,d){return Ma.all(a,d).then(function(a){if(!b(c))throw new TypeError("You must pass a function as filter's second argument.");for(var e=a.length,f=new Array(e),g=0;e>g;g++)f[g]=c(a[g]);return Ma.all(f,d).then(function(b){for(var c=new Array(e),d=0,f=0;e>f;f++)b[f]&&(c[d]=a[f],d++);return c.length=d,c})})}function W(a,b,c){this._superConstructor(a,b,!0,c)}function X(a,b,c){this._superConstructor(a,b,!1,c)}function Y(a,b){return new X(Ma,a,b).promise}function Z(a,b){return new _a(Ma,a,b).promise}function aa(a,c,d){return Ma.all(a,d).then(function(a){if(!b(c))throw new TypeError("You must pass a function as map's second argument.");for(var e=a.length,f=new Array(e),g=0;e>g;g++)f[g]=c(a[g]);return Ma.all(f,d)})}function ba(){this.value=void 0}function ca(a){try{return a.then}catch(b){return eb.value=b,eb}}function da(a,b,c){try{a.apply(b,c)}catch(d){return eb.value=d,eb}}function ea(_,a){for(var b,c,d={},e=_.length,f=new Array(e),g=0;e>g;g++)f[g]=_[g];for(c=0;c<a.length;c++)b=a[c],d[b]=f[c+1];return d}function fa(_){for(var a=_.length,b=new Array(a-1),c=1;a>c;c++)b[c-1]=_[c];return b}function ga(a,b){return{then:function(c,d){return a.call(b,c,d)}}}function ha(a,b){var c=function(){for(var c,d=this,e=arguments.length,f=new Array(e+1),g=!1,h=0;e>h;++h){if(c=arguments[h],!g){if(g=ka(c),g===fb){var i=new Ma(k);return t(i,fb.value),i}g&&g!==!0&&(c=ga(g,c))}f[h]=c}var j=new Ma(k);return f[e]=function(a,c){a?t(j,a):void 0===b?q(j,c):b===!0?q(j,fa(arguments)):ta(b)?q(j,ea(arguments,b)):q(j,c)},g?ja(j,f,a,d):ia(j,f,a,d)};return c.__proto__=a,c}function ia(a,b,c,d){var e=da(c,d,b);return e===eb&&t(a,e.value),a}function ja(a,b,c,d){return Ma.all(b).then(function(b){var e=da(c,d,b);return e===eb&&t(a,e.value),a})}function ka(a){return a&&"object"==typeof a?a.constructor===Ma?!0:ca(a):!1}function la(a,b){return Ma.race(a,b)}function ma(a,b){return Ma.reject(a,b)}function na(a,b){return Ma.resolve(a,b)}function oa(a){throw setTimeout(function(){throw a}),a}function pa(a,b){xa.async(a,b)}function qa(){xa.on.apply(xa,arguments)}function ra(){xa.off.apply(xa,arguments)}var sa;sa=Array.isArray?Array.isArray:function(a){return"[object Array]"===Object.prototype.toString.call(a)};var ta=sa,ua=Date.now||function(){return(new Date).getTime()},va=Object.create||function(a){if(arguments.length>1)throw new Error("Second argument not supported");if("object"!=typeof a)throw new TypeError("Argument must be an object");return d.prototype=a,new d},wa={mixin:function(a){return a.on=this.on,a.off=this.off,a.trigger=this.trigger,a._promiseCallbacks=void 0,a},on:function(a,b){if("function"!=typeof b)throw new TypeError("Callback must be a function");var c,d=f(this);c=d[a],c||(c=d[a]=[]),-1===e(c,b)&&c.push(b)},off:function(a,b){var c,d,g=f(this);return b?(c=g[a],d=e(c,b),void(-1!==d&&c.splice(d,1))):void(g[a]=[])},trigger:function(a,b,c){var d,e,g=f(this);if(d=g[a])for(var h=0;h<d.length;h++)(e=d[h])(b,c)}},xa={instrument:!1};wa.mixin(xa);var ya=[],za=i,Aa=void 0,Ba=1,Ca=2,Da=new w,Ea=new w,Fa=B;B.prototype._validateInput=function(a){return ta(a)},B.prototype._validationError=function(){return new Error("Array Methods must be provided an Array")},B.prototype._init=function(){this._result=new Array(this.length)},B.prototype._enumerate=function(){for(var a=this,b=a.length,c=a.promise,d=a._input,e=0;c._state===Aa&&b>e;e++)a._eachEntry(d[e],e)},B.prototype._eachEntry=function(a,b){var d=this,e=d._instanceConstructor;c(a)?a.constructor===e&&a._state!==Aa?(a._onError=null,d._settledAt(a._state,b,a._result)):d._willSettleAt(e.resolve(a),b):(d._remaining--,d._result[b]=d._makeResult(Ba,b,a))},B.prototype._settledAt=function(a,b,c){var d=this,e=d.promise;e._state===Aa&&(d._remaining--,d._abortOnReject&&a===Ca?t(e,c):d._result[b]=d._makeResult(a,b,c)),0===d._remaining&&s(e,d._result)},B.prototype._makeResult=function(a,b,c){return c},B.prototype._willSettleAt=function(a,b){var c=this;u(a,void 0,function(a){c._settledAt(Ba,b,a)},function(a){c._settledAt(Ca,b,a)})};var Ga=C,Ha=D,Ia=E,Ja=F,Ka="rsvp_"+ua()+"-",La=0,Ma=I;I.cast=Ia,I.all=Ga,I.race=Ha,I.resolve=Ia,I.reject=Ja,I.prototype={constructor:I,_guidKey:Ka,_onError:function(a){var b=this;xa.after(function(){b._onError&&xa.trigger("error",a,b._label)})},then:function(a,b,c){var d=this,e=d._state;if(e===Ba&&!a||e===Ca&&!b)return xa.instrument&&za("chained",d,d),d;d._onError=null;var f=new d.constructor(k,c),g=d._result;if(xa.instrument&&za("chained",d,f),e){var h=arguments[e-1];xa.async(function(){y(e,f,h,g)})}else u(d,f,a,b);return f},"catch":function(a,b){return this.then(void 0,a,b)},"finally":function(a,b){var c=this,d=c.constructor;return c.then(function(b){return d.resolve(a()).then(function(){return b})},function(b){return d.resolve(a()).then(function(){throw b})},b)}},J.prototype=va(Fa.prototype),J.prototype._superConstructor=Fa,J.prototype._makeResult=A,J.prototype._validationError=function(){return new Error("allSettled must be called with an array")};var Na,Oa,Pa=K,Qa=L,Ra=0,Sa=({}.toString,M),Ta="undefined"!=typeof window?window:void 0,Ua=Ta||{},Va=Ua.MutationObserver||Ua.WebKitMutationObserver,Wa="undefined"==typeof self&&"undefined"!=typeof process&&"[object process]"==={}.toString.call(process),Xa="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel,Ya=new Array(1e3);Oa=Wa?N():Va?P():Xa?Q():void 0===Ta&&"function"==typeof require?T():R();var Za=U,$a=V,_a=W;W.prototype=va(Fa.prototype),W.prototype._superConstructor=Fa,W.prototype._init=function(){this._result={}},W.prototype._validateInput=function(a){return a&&"object"==typeof a},W.prototype._validationError=function(){return new Error("Promise.hash must be called with an object")},W.prototype._enumerate=function(){var a=this,b=a.promise,c=a._input,d=[];for(var e in c)b._state===Aa&&Object.prototype.hasOwnProperty.call(c,e)&&d.push({position:e,entry:c[e]});var f=d.length;a._remaining=f;for(var g,h=0;b._state===Aa&&f>h;h++)g=d[h],a._eachEntry(g.entry,g.position)},X.prototype=va(_a.prototype),X.prototype._superConstructor=Fa,X.prototype._makeResult=A,X.prototype._validationError=function(){return new Error("hashSettled must be called with an object")};var ab,bb=Y,cb=Z,db=aa,eb=new ba,fb=new ba,gb=ha;if("object"==typeof self)ab=self;else{if("object"!=typeof global)throw new Error("no global: `self` or `global` found");ab=global}var hb=ab,ib=la,jb=ma,kb=na,lb=oa;xa.async=Sa,xa.after=function(a){setTimeout(a,0)};if("undefined"!=typeof window&&"object"==typeof window.__PROMISE_INSTRUMENTATION__){var mb=window.__PROMISE_INSTRUMENTATION__;g("instrument",!0);for(var nb in mb)mb.hasOwnProperty(nb)&&qa(nb,mb[nb])}var ob={race:ib,Promise:Ma,allSettled:Pa,hash:cb,hashSettled:bb,denodeify:gb,on:qa,off:ra,map:db,filter:$a,resolve:kb,reject:jb,all:Qa,rethrow:lb,defer:Za,EventTarget:wa,configure:g,async:pa};"function"==typeof define&&define.amd?define(function(){return ob}):"undefined"!=typeof module&&module.exports?module.exports=ob:"undefined"!=typeof hb&&(hb.RSVP=ob)}.call(this),function(a,_){function b(a,b,c){this._transitioning=!0;var d=this._complete=c||RSVP.defer(),e=RSVP.defer(),f=b?b:[],g=_.bind(function(){this._transitioning=!1,this._current=a,d.resolve()},this),h=_.bind(function(){this._transitioning=!1,d.reject()},this);return e.promise.then(g,h),this.handlers[a].call(this._context,f,e),window.returnedProm=d.promise,d.promise}function c(a,b,c){var d=this.scenes[a],e=this._current,f=b?b:[],g=this._complete=c||RSVP.defer(),h=RSVP.defer(),i=RSVP.defer(),j=_.bind(function(a,b){var c=b?e:d,f=c?c.name:"";this.trigger(a,e,d),("start"!==a||"end"!==a)&&this.trigger(f+":"+a)},this),k=_.bind(function(){this._transitioning=!1,this._current=e,j("fail"),g.reject()},this),l=_.bind(function(){j("enter"),this._transitioning=!1,this._current=d,j("end"),g.resolve()},this);if(!d)throw'Scene "'+a+'" not found!';return this._transitioning?(g.reject(),g.promise):(j("start"),this._transitioning=!0,e?e.to("exit",f,h).then(function(){j("exit",!0)}):h.resolve(),h.promise.then(function(){d.to(d._initial||"enter",f,i)},k),i.promise.then(l,k),g.promise)}function d(a,b){if(!_.isFunction(a))return a;if(/^_/.test(b))return a;if(a.__wrapped)return a;var c=function(b,c){var d,e=!1;return c=c||RSVP.defer(),this.async=function(){return e=!0,function(a){return a!==!1?c.resolve():c.reject()}},d=a.apply(this,b),this.async=void 0,e?c.promise:d!==!1?c.resolve():c.reject()};return c.__wrapped=!0,c}var e=function(a){a=a||{},_.isArray(a["extends"])&&_.forEach(a["extends"],function(b){_.extend(a,b)}),this._originalOptions=a,this._context=a.context||this,this._id=_.uniqueId("scene"),a.scenes?(_.each(a.scenes,function(b,c){"function"==typeof b&&(a.scenes[c]={enter:b})}),_.each(e.HANDLERS,function(b){a.scenes[b]=a.scenes[b]||function(){return!0}}),this._buildScenes(a.scenes),this._initial=a.initial,this.to=c):(this.handlers={},_.each(e.HANDLERS,function(b){a[b]=a[b]||function(){return!0},this.handlers[b]=d(a[b],b)},this),this.to=b),_.each(a,function(a,b){-1===_.indexOf(e.BLACKLIST,b)&&(_.isFunction(a)?this[b]=function(b){return function(){a.apply(b._context||b,arguments)}}(this):this[b]=a)},this)};RSVP.EventTarget.mixin(e.prototype),e.HANDLERS=["enter","exit"],e.BLACKLIST=["_id","initial","scenes","enter","exit","context","_current"],_.extend(e.prototype,{clone:function(){return this.scenes&&_.each(this._originalOptions.scenes,function(a,b){a instanceof e&&(this._originalOptions.scenes[b]=a.clone())},this),new e(this._originalOptions)},attach:function(a,b){return this.name=a,this.parent=b,b._context&&b._context._id!==b._id&&(this._context=b._context,this.scenes&&_.each(this.scenes,function(a){a.attach(a.name,this)},this)),this},start:function(a){return a=a||[],a.unshift(this._initial),"undefined"!=typeof this._current?RSVP.defer().resolve():this.to.apply(this,a)},next:function(){return this._sequence("next")},prev:function(){return this._sequence("prev")},_sequence:function(a,b){function c(){return b=b||RSVP.defer(),b.reject(),b.promise}var d=this._current,e=d[a+"Scene"];return d.scenes?d[a]():e?this.scenes[e]?this.to(e,[],b):this.parent&&this.parent.scenes[e]?this.parent.to(e,[],b):c():c()},cancelTransition:function(){this._complete.reject(),this._transitioning=!1},scene:function(){return this._current?this._current.name:null},is:function(a){return a===this._current.name},inTransition:function(){return this._transitioning===!0},setContext:function(a){this._context=a,this.scenes&&_.each(this.scenes,function(b){b.setContext(a)})},_buildScenes:function(a){this.scenes={},_.each(a,function(a,b){this.scenes[b]=a instanceof e?a:new e(a),this.scenes[b].attach(b,this)},this)},deferred:function(){return RSVP.defer()}}),a.Storyboard=e}(this,_);